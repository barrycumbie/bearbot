<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>bearü§ñ</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" rel="stylesheet">
  <link href="styles/bear-style.css" rel="stylesheet">
</head>

<body class="container-fluid">


  <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand d-flex align-items-center gap-2" href="#">
        <span class="icon-large">üêª</span>
        <span class="fw-bold">bearbot</span>
        <span class="icon-large">ü§ñ</span>
      </a>
      <ul class="navbar-nav flex-row ms-3">
        <li class="nav-item">
          <a class="nav-link px-2" href="https://una.instructure.com/" target="_blank" rel="noopener">cnvs</a>
        </li>
      </ul>
      <div class="ms-auto d-flex align-items-center gap-3">
        <button id="auth-btn" class="btn btn-primary" onclick="handleAuthAction()">
          <i class="bi bi-box-arrow-in-right me-1"></i>Login
        </button>
        <a href="index-about.html" class="nav-link">About</a>
      </div>
    </div>
  </nav>

  <!-- Search section - only shown when logged in -->
  <div class="container mt-4" id="search-section" style="display: none;">
    <form id="main-search-form" class="mb-4">
      <div class="input-group input-group-lg align-items-center">
        <input type="search" class="form-control rounded-pill" id="main-search" placeholder="Search content, tips, or lessons..." aria-label="Search">
        <button class="btn btn-primary rounded-circle ms-n4 d-flex align-items-center justify-content-center" type="submit" style="width:44px; height:44px; z-index:2; border:none; background:transparent;">
          <i class="bi bi-search" style="font-size:1.05rem;"></i>
        </button>
        <button class="btn btn-outline-secondary ms-2 d-flex align-items-center" type="button" id="filter-btn" title="Filter options">
          <i class="bi bi-funnel" style="font-size:1.05rem;"></i>
          <span class="ms-1 d-none d-md-inline">Filter</span>
        </button>
        <button class="btn btn-outline-secondary ms-2 d-flex align-items-center" type="button" id="view-toggle-btn" title="Toggle grid/list view">
          <i class="bi bi-grid" id="view-icon" style="font-size:1.05rem;"></i>
          <span class="ms-1 d-none d-md-inline">Grid</span>
        </button>
      </div>
    </form>
  </div>

  <main class="container my-5">
    <!-- Welcome section - always shown -->
    <div class="main-hero mx-auto text-center" style="max-width: 800px;">
      <h1 class="display-4 mb-4">Welcome to bearü§ñ</h1>
      <p class="lead mb-4">A web development learning app for CIS 376</p>
    </div>
    
    <!-- Content section - only shown when logged in -->
    <div id="content-section" style="display: none;">
      <div class="row align-items-center mb-4">
        <div class="col">
          <h2>Learning Content</h2>
          <p class="text-muted mb-0" id="results-count">Loading content...</p>
        </div>
        <div class="col-auto">
          <a href="pages/data.html" class="btn btn-outline-info">
            <i class="bi bi-database"></i> Session Data
          </a>
          <button id="logout-btn" class="btn btn-outline-secondary ms-2">
            <i class="bi bi-box-arrow-right"></i> Logout
          </button>
        </div>
      </div>
      <div class="row" id="content-cards">
        <!-- Dynamic content will be loaded here -->
      </div>
    </div>
  </main>

  <footer class="container-fluid d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
    <div class="d-flex align-items-center">
      <span class="mb-3 mb-md-0 text-muted">¬© 2026 bearbot (üêªü§ñ)</span>
    </div>
    <div class="d-flex align-items-center gap-3">
      <a href="https://github.com/barrycumbie/bearbot/" class="footer-link d-flex align-items-center" target="_blank" rel="noopener">
        <img src="https://github.githubassets.com/images/modules/logos_page/Octocat.png" alt="GitHub Octocat" width="24" height="24" class="me-1"/>
        &lt;source code/&gt;
      </a>
      <a href="https://github.com/barrycumbie" class="footer-link d-flex align-items-center" target="_blank" rel="noopener">
        <i class="bi bi-github icon-large"></i>
        <span class="ms-1">barrycumbie</span>
      </a>
      <a href="index-about.html" class="footer-link ms-3">About this App</a>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="scripts/session.js"></script>
  <script src="scripts/app.js"></script>
  <script>
    function handleAuthAction() {
      const isLoggedIn = sessionStorage.getItem('isLoggedIn');
      const currentUser = sessionStorage.getItem('currentUser');
      
      if (isLoggedIn && currentUser) {
        // User is logged in - logout
        sessionStorage.clear();
        location.reload();
      } else {
        // User not logged in - redirect to login
        window.location.href = 'pages/login.html';
      }
    }
    
    // Check login status and show appropriate content
    document.addEventListener('DOMContentLoaded', function() {
      const isLoggedIn = sessionStorage.getItem('isLoggedIn');
      const currentUser = sessionStorage.getItem('currentUser');
      const authBtn = document.getElementById('auth-btn');
      
      if (isLoggedIn && currentUser) {
        // User is logged in - show full functionality
        document.getElementById('search-section').style.display = 'block';
        document.getElementById('content-section').style.display = 'block';
        
        // Update auth button to logout
        authBtn.innerHTML = 'Logout';
        authBtn.className = 'btn btn-outline-secondary';
        authBtn.title = `Logged in as ${currentUser}`;
        
        console.log('Showing authenticated content for user:', currentUser);
      } else {
        // User not logged in - show minimal landing page
        document.getElementById('search-section').style.display = 'none';
        document.getElementById('content-section').style.display = 'none';
        
        // Update auth button to login
        authBtn.innerHTML = '<i class="bi bi-box-arrow-in-right me-1"></i>Login';
        authBtn.className = 'btn btn-primary';
        authBtn.title = 'Click to login';
        
        console.log('Showing public landing page');
      }
    });
  </script>

</body>

</html>